<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1Ïù∏Ïö© Î™®ÎÖ∏Ìè¥Î¶¨ Í≤åÏûÑ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 3px;
            padding: 20px;
            background: #f8f9fa;
            aspect-ratio: 1;
            position: relative;
        }

        .center-control-panel {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
            border: 2px solid #ddd;
            text-align: center;
            z-index: 100;
            min-width: 180px;
            max-width: 250px;
        }

        .center-dice {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: white;
            border: 2px solid #333;
            border-radius: 6px;
            line-height: 26px;
            text-align: center;
            font-size: 14px;
            font-weight: bold;
            margin: 0 3px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .center-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .center-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }

        .center-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .center-btn-buy {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            font-size: 10px;
            padding: 6px 12px;
        }

        .center-turn {
            font-size: 11px;
            font-weight: bold;
            margin: 8px 0 5px 0;
            color: #333;
        }

        .center-money {
            font-size: 10px;
            color: #666;
            margin: 5px 0;
        }

        .cell {
            background: white;
            border: 2px solid #ddd;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 11px;
            text-align: center;
            padding: 5px;
            position: relative;
            min-height: 80px;
            border-radius: 8px;
        }

        .corner {
            background: linear-gradient(45deg, #ffd700, #ffed4a);
            font-weight: bold;
            font-size: 10px;
        }

        .jail {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }

        .property {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .property:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .owned-player {
            background: linear-gradient(45deg, #4ecdc4, #44a08d) !important;
            color: white;
        }

        .owned-computer {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24) !important;
            color: white;
        }

        .player {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid white;
            z-index: 10;
            font-size: 12px;
            line-height: 16px;
            text-align: center;
            color: white;
            font-weight: bold;
        }

        .player-human {
            background: #4ecdc4;
            top: 5px;
            left: 5px;
        }

        .player-computer {
            background: #ff6b6b;
            bottom: 5px;
            right: 5px;
        }

        .info-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            background: #f8f9fa;
        }

        .player-info {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .player-info h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .controls {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-buy {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            font-size: 14px;
            padding: 8px 16px;
        }

        .btn-sell {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            font-size: 12px;
            padding: 6px 12px;
            margin: 5px 0;
        }

        .dice {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: white;
            border: 2px solid #333;
            border-radius: 8px;
            line-height: 36px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin: 0 5px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }

        .game-log {
            max-height: 150px;
            overflow-y: auto;
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 20px;
            font-size: 14px;
            line-height: 1.5;
            border: 1px solid #ddd;
        }

        .log-entry {
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .log-player {
            color: #4ecdc4;
            font-weight: bold;
        }

        .log-computer {
            color: #ff6b6b;
            font-weight: bold;
        }

        .property-name {
            font-size: 10px;
            margin-bottom: 2px;
        }

        .property-price {
            font-size: 8px;
            color: #666;
        }

        .status-indicator {
            font-size: 12px;
            margin: 5px 0;
            padding: 3px 8px;
            border-radius: 10px;
            background: #ffeaa7;
            color: #2d3436;
        }

        .properties-panel {
            background: white;
            margin: 20px;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .properties-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        .property-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #ddd;
        }

        .property-item.player-owned {
            border-color: #4ecdc4;
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
        }

        .property-item.computer-owned {
            border-color: #ff6b6b;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
        }

        @media (max-width: 768px) {
            .cell {
                font-size: 9px;
                min-height: 60px;
                padding: 3px;
            }
            
            .player {
                width: 15px;
                height: 15px;
                font-size: 10px;
                line-height: 11px;
            }

            .properties-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üéØ 1Ïù∏Ïö© Î™®ÎÖ∏Ìè¥Î¶¨ Í≤åÏûÑ</h1>
            <p>Ïª¥Ìì®ÌÑ∞ÏôÄ Î∂ÄÎèôÏÇ∞ Ï†ÑÏüÅÏùÑ Î≤åÏó¨Î≥¥ÏÑ∏Ïöî!</p>
        </div>

        <div class="game-board" id="gameBoard">
            <!-- Ï§ëÏïô Ïª®Ìä∏Î°§ Ìå®ÎÑê -->
            <div class="center-control-panel">
                <div class="center-turn" id="centerTurn">ÎãπÏã†Ïùò Ï∞®Î°Ä!</div>
                <div class="center-money">
                    <div>üßë $<span id="centerPlayerMoney">1000</span></div>
                    <div>ü§ñ $<span id="centerComputerMoney">1000</span></div>
                </div>
                <button class="center-btn" onclick="rollDice()">üé≤ Ï£ºÏÇ¨ÏúÑ</button>
                <button class="center-btn center-btn-buy" id="centerBuyButton" onclick="buyCurrentProperty()" style="display: none;">Íµ¨Îß§</button>
                <div style="margin: 8px 0;">
                    <span class="center-dice" id="centerDice1">1</span>
                    <span class="center-dice" id="centerDice2">1</span>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <div class="player-info">
                <h3>üßë ÌîåÎ†àÏù¥Ïñ¥</h3>
                <p>üí∞ Îèà: $<span id="playerMoney">1000</span></p>
                <p>üè† ÏÜåÏú† Î∂ÄÎèôÏÇ∞: <span id="playerProperties">0</span></p>
                <p>üìç ÏúÑÏπò: <span id="playerPosition">ÏãúÏûë</span></p>
                <div id="playerStatus"></div>
            </div>
            <div class="player-info">
                <h3>ü§ñ Ïª¥Ìì®ÌÑ∞</h3>
                <p>üí∞ Îèà: $<span id="computerMoney">1000</span></p>
                <p>üè† ÏÜåÏú† Î∂ÄÎèôÏÇ∞: <span id="computerProperties">0</span></p>
                <p>üìç ÏúÑÏπò: <span id="computerPosition">ÏãúÏûë</span></p>
                <div id="computerStatus"></div>
            </div>
        </div>

        <div class="controls">
            <button class="btn" id="rollDice" onclick="rollDice()">üé≤ Ï£ºÏÇ¨ÏúÑ Íµ¥Î¶¨Í∏∞</button>
            <button class="btn btn-buy" id="buyButton" onclick="buyCurrentProperty()" style="display: none;">üè† Î∂ÄÎèôÏÇ∞ Íµ¨Îß§</button>
            <div style="margin: 15px 0;">
                <span class="dice" id="dice1">1</span>
                <span class="dice" id="dice2">1</span>
            </div>
            <p id="currentTurn">ÎãπÏã†Ïùò Ï∞®Î°ÄÏûÖÎãàÎã§!</p>
        </div>

        <div class="game-log" id="gameLog">
            <div class="log-entry">Í≤åÏûÑÏù¥ ÏãúÏûëÎêòÏóàÏäµÎãàÎã§! ÌîåÎ†àÏù¥Ïñ¥ÏôÄ Ïª¥Ìì®ÌÑ∞ Î™®Îëê $1000ÏúºÎ°ú ÏãúÏûëÌï©ÎãàÎã§.</div>
        </div>

        <div class="properties-panel">
            <h3>üè† Î∂ÄÎèôÏÇ∞ ÌòÑÌô©</h3>
            <div class="properties-grid" id="propertiesGrid"></div>
        </div>
    </div>

    <script>
        // Í≤åÏûÑ ÏÉÅÌÉú
        let gameState = {
            currentPlayer: 'player',
            playerMoney: 1000,
            computerMoney: 1000,
            playerPosition: 0,
            computerPosition: 0,
            playerProperties: [],
            computerProperties: [],
            playerInJail: false,
            computerInJail: false,
            playerJailFree: false,
            computerJailFree: false,
            playerDoubleCount: 0,
            computerDoubleCount: 0,
            gameEnded: false
        };

        // 5x5 Î≥¥Îìú Î†àÏù¥ÏïÑÏõÉ (16Ïπ∏, ÌÖåÎëêÎ¶¨Îßå ÏÇ¨Ïö©)
        const boardLayout = [
            { name: 'ÏãúÏûë', type: 'corner', price: 0 },
            { name: 'Í∞ïÎÇ®', type: 'property', price: 100 },
            { name: 'ÌñâÏö¥Ïπ¥Îìú', type: 'lucky', price: 0 },
            { name: 'ÌôçÎåÄ', type: 'property', price: 120 },
            { name: 'Í∞êÏò•', type: 'jail', price: 0 },
            { name: 'Î™ÖÎèô', type: 'property', price: 150 },
            { name: 'ÎèôÎåÄÎ¨∏', type: 'property', price: 100 },
            { name: 'Ïù¥ÌÉúÏõê', type: 'property', price: 130 },
            { name: 'Î¨¥Î£åÏ£ºÏ∞®', type: 'corner', price: 0 },
            { name: 'Ïó¨ÏùòÎèÑ', type: 'property', price: 110 },
            { name: 'ÌñâÏö¥Ïπ¥Îìú', type: 'lucky', price: 0 },
            { name: 'Í±¥ÎåÄ', type: 'property', price: 90 },
            { name: 'ÏÑ∏Í∏à', type: 'tax', price: 0 },
            { name: 'Ïã†Ï¥å', type: 'property', price: 80 },
            { name: 'Ïû†Ïã§', type: 'property', price: 140 },
            { name: 'ÏïïÍµ¨Ï†ï', type: 'property', price: 160 }
        ];

        // 5x5 Í∑∏Î¶¨ÎìúÏóêÏÑú Î≥¥Îìú ÏúÑÏπò Îß§Ìïë
        const positionToGrid = [
            0, 1, 2, 3, 4,          // ÏúÑÏ™Ω (0-4)
            9, 14, 19,              // Ïò§Î•∏Ï™Ω (5-7)
            24, 23, 22, 21, 20,     // ÏïÑÎûòÏ™Ω (8-12)
            15, 10, 5               // ÏôºÏ™Ω (13-15)
        ];

        // Î≥¥Îìú Ï¥àÍ∏∞Ìôî
        function initBoard() {
            const board = document.getElementById('gameBoard');
            
            // Í∏∞Ï°¥ Í≤åÏûÑ ÏÖÄÎì§Îßå Ï†úÍ±∞ (Ï§ëÏïô Ìå®ÎÑê Ï†úÏô∏)
            const existingCells = board.querySelectorAll('.cell');
            existingCells.forEach(cell => cell.remove());
            
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.id = `cell-${i}`;
                
                const boardIndex = positionToGrid.indexOf(i);
                if (boardIndex !== -1) {
                    const cellData = boardLayout[boardIndex];
                    
                    if (cellData.type === 'corner') {
                        cell.classList.add('corner');
                        cell.innerHTML = `<div>${cellData.name}</div>`;
                    } else if (cellData.type === 'jail') {
                        cell.classList.add('jail');
                        cell.innerHTML = `<div>üîí${cellData.name}</div>`;
                    } else if (cellData.type === 'property') {
                        cell.classList.add('property');
                        cell.innerHTML = `
                            <div class="property-name">${cellData.name}</div>
                            <div class="property-price">${cellData.price}</div>
                        `;
                    } else if (cellData.type === 'tax') {
                        cell.innerHTML = `<div style="font-size: 9px;">üí∏${cellData.name}<br>$50</div>`;
                    } else {
                        cell.innerHTML = `<div style="font-size: 9px;">üçÄ${cellData.name}</div>`;
                    }
                } else {
                    cell.style.background = '#f8f9fa';
                    cell.style.border = 'none';
                }
                
                // Ï§ëÏïô Ìå®ÎÑê ÏïûÏóê ÏÖÄ Ï∂îÍ∞Ä
                board.insertBefore(cell, board.querySelector('.center-control-panel'));
            }
            
            updateBoard();
            updatePropertiesPanel();
        }

        // Î∂ÄÎèôÏÇ∞ Ìå®ÎÑê ÏóÖÎç∞Ïù¥Ìä∏
        function updatePropertiesPanel() {
            const panel = document.getElementById('propertiesGrid');
            if (!panel) return;
            
            panel.innerHTML = '';
            
            boardLayout.forEach((cell, index) => {
                if (cell.type === 'property') {
                    const propertyItem = document.createElement('div');
                    propertyItem.className = 'property-item';
                    
                    let owner = 'ÎØ∏ÏÜåÏú†';
                    let sellButton = '';
                    
                    if (gameState.playerProperties.includes(index)) {
                        propertyItem.classList.add('player-owned');
                        owner = 'ÌîåÎ†àÏù¥Ïñ¥ ÏÜåÏú†';
                        sellButton = `<button class="btn btn-sell" onclick="sellProperty(${index})">ÌåêÎß§ ($${Math.floor(cell.price * 0.7)})</button>`;
                    } else if (gameState.computerProperties.includes(index)) {
                        propertyItem.classList.add('computer-owned');
                        owner = 'Ïª¥Ìì®ÌÑ∞ ÏÜåÏú†';
                    }
                    
                    propertyItem.innerHTML = `
                        <div><strong>${cell.name}</strong></div>
                        <div>Íµ¨Îß§Í∞Ä: $${cell.price}</div>
                        <div>ÏûÑÎåÄÎ£å: $${Math.floor(cell.price * 0.15)}</div>
                        <div style="font-size: 12px; color: #666;">${owner}</div>
                        ${sellButton}
                    `;
                    
                    panel.appendChild(propertyItem);
                }
            });
        }

        // Î∂ÄÎèôÏÇ∞ ÌåêÎß§
        function sellProperty(propertyIndex) {
            if (!gameState.playerProperties.includes(propertyIndex)) return;
            
            const cellData = boardLayout[propertyIndex];
            const sellPrice = Math.floor(cellData.price * 0.7);
            
            if (confirm(`${cellData.name}ÏùÑ(Î•º) $${sellPrice}Ïóê ÌåêÎß§ÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)) {
                gameState.playerMoney += sellPrice;
                gameState.playerProperties = gameState.playerProperties.filter(p => p !== propertyIndex);
                addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä ${cellData.name}ÏùÑ(Î•º) $${sellPrice}Ïóê ÌåêÎß§ÌñàÏäµÎãàÎã§.`);
                updateUI();
                updateBoard();
                updatePropertiesPanel();
            }
        }

        // Î≥¥Îìú ÏóÖÎç∞Ïù¥Ìä∏
        function updateBoard() {
            document.querySelectorAll('.player').forEach(p => p.remove());
            
            const playerGridPos = positionToGrid[gameState.playerPosition];
            const computerGridPos = positionToGrid[gameState.computerPosition];
            
            if (playerGridPos !== undefined) {
                const playerCell = document.getElementById(`cell-${playerGridPos}`);
                if (playerCell) {
                    const playerMarker = document.createElement('div');
                    playerMarker.className = 'player player-human';
                    playerMarker.textContent = gameState.playerInJail ? 'üîí' : 'P';
                    playerCell.appendChild(playerMarker);
                }
            }
            
            if (computerGridPos !== undefined) {
                const computerCell = document.getElementById(`cell-${computerGridPos}`);
                if (computerCell) {
                    const computerMarker = document.createElement('div');
                    computerMarker.className = 'player player-computer';
                    computerMarker.textContent = gameState.computerInJail ? 'üîí' : 'C';
                    computerCell.appendChild(computerMarker);
                }
            }
            
            document.querySelectorAll('.cell').forEach(cell => {
                cell.classList.remove('owned-player', 'owned-computer');
            });
            
            gameState.playerProperties.forEach(propIndex => {
                const cellIndex = positionToGrid[propIndex];
                if (cellIndex !== undefined) {
                    const cell = document.getElementById(`cell-${cellIndex}`);
                    if (cell) cell.classList.add('owned-player');
                }
            });
            
            gameState.computerProperties.forEach(propIndex => {
                const cellIndex = positionToGrid[propIndex];
                if (cellIndex !== undefined) {
                    const cell = document.getElementById(`cell-${cellIndex}`);
                    if (cell) cell.classList.add('owned-computer');
                }
            });
            
            updateBuyButton();
        }

        // Íµ¨Îß§ Î≤ÑÌäº ÏóÖÎç∞Ïù¥Ìä∏
        function updateBuyButton() {
            const buyButton = document.getElementById('buyButton');
            const centerBuyButton = document.getElementById('centerBuyButton');
            
            const currentCell = boardLayout[gameState.playerPosition];
            if (!currentCell) return;
            
            const canBuy = gameState.currentPlayer === 'player' && 
                currentCell.type === 'property' && 
                !gameState.playerProperties.includes(gameState.playerPosition) && 
                !gameState.computerProperties.includes(gameState.playerPosition) &&
                gameState.playerMoney >= currentCell.price &&
                !gameState.playerInJail;
            
            if (buyButton) {
                if (canBuy) {
                    buyButton.style.display = 'inline-block';
                    buyButton.textContent = `üè† ${currentCell.name} Íµ¨Îß§ (${currentCell.price})`;
                } else {
                    buyButton.style.display = 'none';
                }
            }
            
            if (centerBuyButton) {
                if (canBuy) {
                    centerBuyButton.style.display = 'inline-block';
                    centerBuyButton.textContent = `Íµ¨Îß§ ${currentCell.price}`;
                } else {
                    centerBuyButton.style.display = 'none';
                }
            }
        }

        // UI ÏóÖÎç∞Ïù¥Ìä∏
        function updateUI() {
            const elements = {
                playerMoney: document.getElementById('playerMoney'),
                computerMoney: document.getElementById('computerMoney'),
                playerProperties: document.getElementById('playerProperties'),
                computerProperties: document.getElementById('computerProperties'),
                playerPosition: document.getElementById('playerPosition'),
                computerPosition: document.getElementById('computerPosition'),
                playerStatus: document.getElementById('playerStatus'),
                computerStatus: document.getElementById('computerStatus'),
                currentTurn: document.getElementById('currentTurn'),
                centerTurn: document.getElementById('centerTurn'),
                centerPlayerMoney: document.getElementById('centerPlayerMoney'),
                centerComputerMoney: document.getElementById('centerComputerMoney')
            };
            
            if (elements.playerMoney) elements.playerMoney.textContent = gameState.playerMoney;
            if (elements.computerMoney) elements.computerMoney.textContent = gameState.computerMoney;
            if (elements.playerProperties) elements.playerProperties.textContent = gameState.playerProperties.length;
            if (elements.computerProperties) elements.computerProperties.textContent = gameState.computerProperties.length;
            if (elements.playerPosition) elements.playerPosition.textContent = boardLayout[gameState.playerPosition]?.name || 'Ïïå Ïàò ÏóÜÏùå';
            if (elements.computerPosition) elements.computerPosition.textContent = boardLayout[gameState.computerPosition]?.name || 'Ïïå Ïàò ÏóÜÏùå';
            
            // Ï§ëÏïô Ìå®ÎÑê ÏóÖÎç∞Ïù¥Ìä∏
            if (elements.centerPlayerMoney) elements.centerPlayerMoney.textContent = gameState.playerMoney;
            if (elements.centerComputerMoney) elements.centerComputerMoney.textContent = gameState.computerMoney;
            
            const turnText = gameState.currentPlayer === 'player' ? 'ÎãπÏã†Ïùò Ï∞®Î°Ä!' : 'Ïª¥Ìì®ÌÑ∞ Ï∞®Î°Ä';
            if (elements.currentTurn) elements.currentTurn.textContent = gameState.currentPlayer === 'player' ? 'ÎãπÏã†Ïùò Ï∞®Î°ÄÏûÖÎãàÎã§!' : 'Ïª¥Ìì®ÌÑ∞Ïùò Ï∞®Î°ÄÏûÖÎãàÎã§...';
            if (elements.centerTurn) elements.centerTurn.textContent = turnText;
            
            let playerStatusText = '';
            if (gameState.playerInJail) playerStatusText += '<div class="status-indicator">üîí Í∞êÏò•Ïóê ÏûàÏùå</div>';
            if (gameState.playerJailFree) playerStatusText += '<div class="status-indicator">üóùÔ∏è Í∞êÏò• Î©¥Ï†úÍ∂å Î≥¥Ïú†</div>';
            if (elements.playerStatus) elements.playerStatus.innerHTML = playerStatusText;
            
            let computerStatusText = '';
            if (gameState.computerInJail) computerStatusText += '<div class="status-indicator">üîí Í∞êÏò•Ïóê ÏûàÏùå</div>';
            if (gameState.computerJailFree) computerStatusText += '<div class="status-indicator">üóùÔ∏è Í∞êÏò• Î©¥Ï†úÍ∂å Î≥¥Ïú†</div>';
            if (elements.computerStatus) elements.computerStatus.innerHTML = computerStatusText;
        }

        // Í≤åÏûÑ Î°úÍ∑∏ Ï∂îÍ∞Ä
        function addLog(message) {
            const log = document.getElementById('gameLog');
            if (!log) return;
            
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = message;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        // Ï£ºÏÇ¨ÏúÑ Íµ¥Î¶¨Í∏∞
        function rollDice() {
            if (gameState.gameEnded) return;
            
            if (gameState.currentPlayer === 'player' && gameState.playerInJail) {
                gameState.playerInJail = false;
                addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä Í∞êÏò•ÏóêÏÑú 1ÌÑ¥ÏùÑ Ïâ¨ÏóàÏäµÎãàÎã§.`);
                gameState.currentPlayer = 'computer';
                setTimeout(() => {
                    if (!gameState.gameEnded) computerTurn();
                }, 1500);
                updateUI();
                updateBoard();
                return;
            }
            
            const dice1 = Math.floor(Math.random() * 4) + 1;
            const dice2 = Math.floor(Math.random() * 4) + 1;
            const total = dice1 + dice2;
            const isDouble = dice1 === dice2;
            
            document.getElementById('dice1').textContent = dice1;
            document.getElementById('dice2').textContent = dice2;
            document.getElementById('centerDice1').textContent = dice1;
            document.getElementById('centerDice2').textContent = dice2;
            document.getElementById('centerDice1').textContent = dice1;
            document.getElementById('centerDice2').textContent = dice2;
            
            if (gameState.currentPlayer === 'player') {
                if (isDouble) {
                    gameState.playerDoubleCount++;
                    addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä ÎçîÎ∏î ${dice1} + ${dice2} = ${total}ÏùÑ Íµ¥Î†∏ÏäµÎãàÎã§! (${gameState.playerDoubleCount}Î≤àÏß∏)`);
                    
                    if (gameState.playerDoubleCount >= 2) {
                        addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä Ïó∞ÏÜç ÎçîÎ∏îÎ°ú Í∞êÏò•Ïóê Í∞ëÎãàÎã§!`);
                        gameState.playerPosition = 4;
                        gameState.playerInJail = true;
                        gameState.playerDoubleCount = 0;
                        gameState.currentPlayer = 'computer';
                        setTimeout(() => {
                            if (!gameState.gameEnded) computerTurn();
                        }, 1500);
                        updateUI();
                        updateBoard();
                        return;
                    }
                } else {
                    gameState.playerDoubleCount = 0;
                    addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä ${dice1} + ${dice2} = ${total}ÏùÑ Íµ¥Î†∏ÏäµÎãàÎã§.`);
                }
                
                const oldPosition = gameState.playerPosition;
                gameState.playerPosition = (gameState.playerPosition + total) % 16;
                addLog(`${boardLayout[gameState.playerPosition].name}Ïóê ÎèÑÏ∞©!`);
                
                if (gameState.playerPosition < oldPosition) {
                    gameState.playerMoney += 100;
                    addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä ÏãúÏûëÏ†êÏùÑ ÏßÄÎÇòÍ∞ÄÏÑú $100ÏùÑ Î∞õÏïòÏäµÎãàÎã§!`);
                }
                
                handleLanding('player', gameState.playerPosition);
                
                if (!isDouble) {
                    gameState.currentPlayer = 'computer';
                    setTimeout(() => {
                        if (!gameState.gameEnded) computerTurn();
                    }, 1500);
                }
            }
            
            updateUI();
            updateBoard();
            updatePropertiesPanel();
        }

        // Ïª¥Ìì®ÌÑ∞ ÌÑ¥
        function computerTurn() {
            if (gameState.computerInJail) {
                gameState.computerInJail = false;
                addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä Í∞êÏò•ÏóêÏÑú 1ÌÑ¥ÏùÑ Ïâ¨ÏóàÏäµÎãàÎã§.`);
                gameState.currentPlayer = 'player';
                updateUI();
                updateBoard();
                return;
            }
            
            const dice1 = Math.floor(Math.random() * 4) + 1;
            const dice2 = Math.floor(Math.random() * 4) + 1;
            const total = dice1 + dice2;
            const isDouble = dice1 === dice2;
            
            document.getElementById('dice1').textContent = dice1;
            document.getElementById('dice2').textContent = dice2;
            
            if (isDouble) {
                gameState.computerDoubleCount++;
                addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä ÎçîÎ∏î ${dice1} + ${dice2} = ${total}ÏùÑ Íµ¥Î†∏ÏäµÎãàÎã§! (${gameState.computerDoubleCount}Î≤àÏß∏)`);
                
                if (gameState.computerDoubleCount >= 2) {
                    addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä Ïó∞ÏÜç ÎçîÎ∏îÎ°ú Í∞êÏò•Ïóê Í∞ëÎãàÎã§!`);
                    gameState.computerPosition = 4;
                    gameState.computerInJail = true;
                    gameState.computerDoubleCount = 0;
                    gameState.currentPlayer = 'player';
                    updateUI();
                    updateBoard();
                    return;
                }
            } else {
                gameState.computerDoubleCount = 0;
                addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä ${dice1} + ${dice2} = ${total}ÏùÑ Íµ¥Î†∏ÏäµÎãàÎã§.`);
            }
            
            const oldPosition = gameState.computerPosition;
            gameState.computerPosition = (gameState.computerPosition + total) % 16;
            addLog(`${boardLayout[gameState.computerPosition].name}Ïóê ÎèÑÏ∞©!`);
            
            if (gameState.computerPosition < oldPosition) {
                gameState.computerMoney += 100;
                addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä ÏãúÏûëÏ†êÏùÑ ÏßÄÎÇòÍ∞ÄÏÑú $100ÏùÑ Î∞õÏïòÏäµÎãàÎã§!`);
            }
            
            handleLanding('computer', gameState.computerPosition);
            
            if (!isDouble) {
                gameState.currentPlayer = 'player';
            } else {
                setTimeout(() => {
                    if (!gameState.gameEnded) computerTurn();
                }, 1500);
            }
            
            updateUI();
            updateBoard();
            updatePropertiesPanel();
        }

        // ÌñâÏö¥Ïπ¥Îìú Ï≤òÎ¶¨
        function handleLuckyCard(player) {
            const effects = [
                { text: 'Í∞êÏò•ÏúºÎ°ú Í∞ëÎãàÎã§!', action: 'jail' },
                { text: 'Í∞êÏò• Î©¥Ï†úÍ∂åÏùÑ Î∞õÏïòÏäµÎãàÎã§!', action: 'jailFree' },
                { text: 'ÏÑ∏Í∏àÏπ∏ÏúºÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§!', action: 'tax' },
                { text: 'ÏÉÅÎåÄÎ∞©Ïùò Î∂ÄÎèôÏÇ∞ ÌïòÎÇòÎ•º Í∞ïÏ†ú ÌåêÎß§ÏãúÌÇµÎãàÎã§!', action: 'sellOpponent' },
                { text: '$300Î•º Î∞õÏäµÎãàÎã§!', action: 'money' }
            ];
            
            const effect = effects[Math.floor(Math.random() * effects.length)];
            addLog(`üçÄ ÌñâÏö¥Ïπ¥Îìú: ${effect.text}`);
            
            switch (effect.action) {
                case 'jail':
                    if (player === 'player') {
                        if (gameState.playerJailFree) {
                            gameState.playerJailFree = false;
                            addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä Í∞êÏò• Î©¥Ï†úÍ∂åÏùÑ ÏÇ¨Ïö©ÌñàÏäµÎãàÎã§!`);
                        } else {
                            gameState.playerPosition = 4;
                            gameState.playerInJail = true;
                        }
                    } else {
                        if (gameState.computerJailFree) {
                            gameState.computerJailFree = false;
                            addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä Í∞êÏò• Î©¥Ï†úÍ∂åÏùÑ ÏÇ¨Ïö©ÌñàÏäµÎãàÎã§!`);
                        } else {
                            gameState.computerPosition = 4;
                            gameState.computerInJail = true;
                        }
                    }
                    break;
                case 'jailFree':
                    if (player === 'player') {
                        gameState.playerJailFree = true;
                    } else {
                        gameState.computerJailFree = true;
                    }
                    break;
                case 'tax':
                    const taxPosition = 12;
                    if (player === 'player') {
                        gameState.playerPosition = taxPosition;
                        gameState.playerMoney -= 50;
                        addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä ÏÑ∏Í∏à $50ÏùÑ ÏßÄÎ∂àÌñàÏäµÎãàÎã§.`);
                    } else {
                        gameState.computerPosition = taxPosition;
                        gameState.computerMoney -= 50;
                        addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä ÏÑ∏Í∏à $50ÏùÑ ÏßÄÎ∂àÌñàÏäµÎãàÎã§.`);
                    }
                    break;
                case 'sellOpponent':
                    if (player === 'player' && gameState.computerProperties.length > 0) {
                        const randomIndex = Math.floor(Math.random() * gameState.computerProperties.length);
                        const propertyIndex = gameState.computerProperties[randomIndex];
                        const sellPrice = Math.floor(boardLayout[propertyIndex].price * 0.7);
                        gameState.computerMoney += sellPrice;
                        gameState.computerProperties.splice(randomIndex, 1);
                        addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Ïùò ${boardLayout[propertyIndex].name}Ïù¥ Í∞ïÏ†ú ÌåêÎß§ÎêòÏñ¥ ${sellPrice}Î•º Î∞õÏïòÏäµÎãàÎã§.`);
                    } else if (player === 'computer' && gameState.playerProperties.length > 0) {
                        const randomIndex = Math.floor(Math.random() * gameState.playerProperties.length);
                        const propertyIndex = gameState.playerProperties[randomIndex];
                        const sellPrice = Math.floor(boardLayout[propertyIndex].price * 0.7);
                        gameState.playerMoney += sellPrice;
                        gameState.playerProperties.splice(randomIndex, 1);
                        addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Ïùò ${boardLayout[propertyIndex].name}Ïù¥ Í∞ïÏ†ú ÌåêÎß§ÎêòÏñ¥ ${sellPrice}Î•º Î∞õÏïòÏäµÎãàÎã§.`);
                    }
                    break;
                case 'money':
                    if (player === 'player') {
                        gameState.playerMoney += 300;
                        addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä $300ÏùÑ Î∞õÏïòÏäµÎãàÎã§!`);
                    } else {
                        gameState.computerMoney += 300;
                        addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä $300ÏùÑ Î∞õÏïòÏäµÎãàÎã§!`);
                    }
                    break;
            }
        }

        // Ï∞©ÏßÄ Ï≤òÎ¶¨
        function handleLanding(player, position) {
            const cellData = boardLayout[position];
            
            if (cellData.type === 'property') {
                if (player === 'computer') {
                    if (gameState.computerMoney >= cellData.price && 
                        !gameState.playerProperties.includes(position) && 
                        !gameState.computerProperties.includes(position) &&
                        Math.random() > 0.4) {
                        gameState.computerMoney -= cellData.price;
                        gameState.computerProperties.push(position);
                        addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä ${cellData.name}ÏùÑ(Î•º) ${cellData.price}Ïóê Íµ¨Îß§ÌñàÏäµÎãàÎã§!`);
                    }
                }
                
                if (player === 'player' && gameState.computerProperties.includes(position)) {
                    const rent = Math.floor(cellData.price * 0.15);
                    gameState.playerMoney -= rent;
                    gameState.computerMoney += rent;
                    addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä ${cellData.name}Ïùò ÏûÑÎåÄÎ£å ${rent}ÏùÑ ÏßÄÎ∂àÌñàÏäµÎãàÎã§.`);
                } else if (player === 'computer' && gameState.playerProperties.includes(position)) {
                    const rent = Math.floor(cellData.price * 0.15);
                    gameState.computerMoney -= rent;
                    gameState.playerMoney += rent;
                    addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä ${cellData.name}Ïùò ÏûÑÎåÄÎ£å ${rent}ÏùÑ ÏßÄÎ∂àÌñàÏäµÎãàÎã§.`);
                }
            } else if (cellData.type === 'tax') {
                if (player === 'player') {
                    gameState.playerMoney -= 50;
                    addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä ÏÑ∏Í∏à $50ÏùÑ ÏßÄÎ∂àÌñàÏäµÎãàÎã§.`);
                } else {
                    gameState.computerMoney -= 50;
                    addLog(`<span class="log-computer">Ïª¥Ìì®ÌÑ∞</span>Í∞Ä ÏÑ∏Í∏à $50ÏùÑ ÏßÄÎ∂àÌñàÏäµÎãàÎã§.`);
                }
            } else if (cellData.type === 'lucky') {
                handleLuckyCard(player);
            }
            
            checkGameEnd();
        }

        // ÌòÑÏû¨ Î∂ÄÎèôÏÇ∞ Íµ¨Îß§
        function buyCurrentProperty() {
            const currentCell = boardLayout[gameState.playerPosition];
            if (currentCell.type !== 'property') return;
            
            if (gameState.playerMoney >= currentCell.price) {
                gameState.playerMoney -= currentCell.price;
                gameState.playerProperties.push(gameState.playerPosition);
                addLog(`<span class="log-player">ÌîåÎ†àÏù¥Ïñ¥</span>Í∞Ä ${currentCell.name}ÏùÑ(Î•º) ${currentCell.price}Ïóê Íµ¨Îß§ÌñàÏäµÎãàÎã§!`);
                updateUI();
                updateBoard();
                updatePropertiesPanel();
            }
        }

        // Í≤åÏûÑ Ï¢ÖÎ£å ÌôïÏù∏
        function checkGameEnd() {
            if (gameState.playerMoney < 0) {
                addLog('üí∏ Í≤åÏûÑ Ï¢ÖÎ£å! ÎèàÏù¥ Î∂ÄÏ°±ÌïòÏó¨ ÌååÏÇ∞ÌñàÏäµÎãàÎã§. Ïª¥Ìì®ÌÑ∞ ÏäπÎ¶¨!');
                gameState.gameEnded = true;
                document.getElementById('rollDice').disabled = true;
            } else if (gameState.computerMoney < 0) {
                addLog('üéâ Ï∂ïÌïòÌï©ÎãàÎã§! Ïª¥Ìì®ÌÑ∞Í∞Ä ÌååÏÇ∞ÌñàÏäµÎãàÎã§. ÌîåÎ†àÏù¥Ïñ¥ ÏäπÎ¶¨!');
                gameState.gameEnded = true;
                document.getElementById('rollDice').disabled = true;
            } else if (gameState.playerProperties.length >= 6) {
                addLog('üéâ Ï∂ïÌïòÌï©ÎãàÎã§! 6Í∞ú Ïù¥ÏÉÅÏùò Î∂ÄÎèôÏÇ∞ÏùÑ ÏÜåÏú†ÌïòÏó¨ ÏäπÎ¶¨ÌñàÏäµÎãàÎã§!');
                gameState.gameEnded = true;
                document.getElementById('rollDice').disabled = true;
            } else if (gameState.computerProperties.length >= 6) {
                addLog('üí∏ Í≤åÏûÑ Ï¢ÖÎ£å! Ïª¥Ìì®ÌÑ∞Í∞Ä 6Í∞ú Ïù¥ÏÉÅÏùò Î∂ÄÎèôÏÇ∞ÏùÑ ÏÜåÏú†ÌñàÏäµÎãàÎã§. Ïª¥Ìì®ÌÑ∞ ÏäπÎ¶¨!');
                gameState.gameEnded = true;
                document.getElementById('rollDice').disabled = true;
            }
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú ÌõÑ Í≤åÏûÑ Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            initBoard();
            updateUI();
        });
        
        // Ï¥àÍ∏∞Ìôî Ìï®Ïàò ÏßÅÏ†ë Ìò∏Ï∂ú (Î∞±ÏóÖ)
        initBoard();
        updateUI();
    </script>
</body>
</html>
