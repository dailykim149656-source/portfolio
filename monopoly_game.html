<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1ì¸ìš© ëª¨ë…¸í´ë¦¬ ê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            max-width: 800px;
            width: 100%;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 3px;
            padding: 20px;
            background: #f8f9fa;
            aspect-ratio: 1;
            position: relative;
        }

        .center-control-panel {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
            border: 2px solid #ddd;
            text-align: center;
            z-index: 100;
            min-width: 180px;
            max-width: 250px;
        }

        .center-dice {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: white;
            border: 2px solid #333;
            border-radius: 6px;
            line-height: 26px;
            text-align: center;
            font-size: 14px;
            font-weight: bold;
            margin: 0 3px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .center-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .center-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
        }

        .center-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .center-btn-buy {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            font-size: 10px;
            padding: 6px 12px;
        }

        .center-turn {
            font-size: 11px;
            font-weight: bold;
            margin: 8px 0 5px 0;
            color: #333;
        }

        .center-money {
            font-size: 10px;
            color: #666;
            margin: 5px 0;
        }

        .cell {
            background: white;
            border: 2px solid #ddd;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 11px;
            text-align: center;
            padding: 5px;
            position: relative;
            min-height: 80px;
            border-radius: 8px;
        }

        .corner {
            background: linear-gradient(45deg, #ffd700, #ffed4a);
            font-weight: bold;
            font-size: 10px;
        }

        .jail {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }

        .property {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .property:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .owned-player {
            background: linear-gradient(45deg, #4ecdc4, #44a08d) !important;
            color: white;
        }

        .owned-computer {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24) !important;
            color: white;
        }

        .player {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid white;
            z-index: 10;
            font-size: 12px;
            line-height: 16px;
            text-align: center;
            color: white;
            font-weight: bold;
        }

        .player-human {
            background: #4ecdc4;
            top: 5px;
            left: 5px;
        }

        .player-computer {
            background: #ff6b6b;
            bottom: 5px;
            right: 5px;
        }

        .info-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            background: #f8f9fa;
        }

        .player-info {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .player-info h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .controls {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-buy {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            font-size: 14px;
            padding: 8px 16px;
        }

        .btn-sell {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            font-size: 12px;
            padding: 6px 12px;
            margin: 5px 0;
        }

        .dice {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: white;
            border: 2px solid #333;
            border-radius: 8px;
            line-height: 36px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            margin: 0 5px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }

        .game-log {
            max-height: 150px;
            overflow-y: auto;
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 20px;
            font-size: 14px;
            line-height: 1.5;
            border: 1px solid #ddd;
        }

        .log-entry {
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .log-player {
            color: #4ecdc4;
            font-weight: bold;
        }

        .log-computer {
            color: #ff6b6b;
            font-weight: bold;
        }

        .property-name {
            font-size: 10px;
            margin-bottom: 2px;
        }

        .property-price {
            font-size: 8px;
            color: #666;
        }

        .status-indicator {
            font-size: 12px;
            margin: 5px 0;
            padding: 3px 8px;
            border-radius: 10px;
            background: #ffeaa7;
            color: #2d3436;
        }

        .properties-panel {
            background: white;
            margin: 20px;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .properties-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        .property-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            border: 2px solid #ddd;
        }

        .property-item.player-owned {
            border-color: #4ecdc4;
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
        }

        .property-item.computer-owned {
            border-color: #ff6b6b;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
        }

        @media (max-width: 768px) {
            .cell {
                font-size: 9px;
                min-height: 60px;
                padding: 3px;
            }
            
            .player {
                width: 15px;
                height: 15px;
                font-size: 10px;
                line-height: 11px;
            }

            .properties-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>ğŸ¯ 1ì¸ìš© ëª¨ë…¸í´ë¦¬ ê²Œì„</h1>
            <p>ì»´í“¨í„°ì™€ ë¶€ë™ì‚° ì „ìŸì„ ë²Œì—¬ë³´ì„¸ìš”!</p>
        </div>

        <div class="game-board" id="gameBoard">
            <!-- ì¤‘ì•™ ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
            <div class="center-control-panel">
                <div class="center-turn" id="centerTurn">ë‹¹ì‹ ì˜ ì°¨ë¡€!</div>
                <div class="center-money">
                    <div>ğŸ§‘ $<span id="centerPlayerMoney">1000</span></div>
                    <div>ğŸ¤– $<span id="centerComputerMoney">1000</span></div>
                </div>
                <button class="center-btn" onclick="rollDice()">ğŸ² ì£¼ì‚¬ìœ„</button>
                <button class="center-btn center-btn-buy" id="centerBuyButton" onclick="buyCurrentProperty()" style="display: none;">êµ¬ë§¤</button>
                <div style="margin: 8px 0;">
                    <span class="center-dice" id="centerDice1">1</span>
                    <span class="center-dice" id="centerDice2">1</span>
                </div>
            </div>
        </div>

        <div class="info-panel">
            <div class="player-info">
                <h3>ğŸ§‘ í”Œë ˆì´ì–´</h3>
                <p>ğŸ’° ëˆ: $<span id="playerMoney">1000</span></p>
                <p>ğŸ  ì†Œìœ  ë¶€ë™ì‚°: <span id="playerProperties">0</span></p>
                <p>ğŸ“ ìœ„ì¹˜: <span id="playerPosition">ì‹œì‘</span></p>
                <div id="playerStatus"></div>
            </div>
            <div class="player-info">
                <h3>ğŸ¤– ì»´í“¨í„°</h3>
                <p>ğŸ’° ëˆ: $<span id="computerMoney">1000</span></p>
                <p>ğŸ  ì†Œìœ  ë¶€ë™ì‚°: <span id="computerProperties">0</span></p>
                <p>ğŸ“ ìœ„ì¹˜: <span id="computerPosition">ì‹œì‘</span></p>
                <div id="computerStatus"></div>
            </div>
        </div>

        <div class="controls">
            <button class="btn" id="rollDice" onclick="rollDice()">ğŸ² ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</button>
            <button class="btn btn-buy" id="buyButton" onclick="buyCurrentProperty()" style="display: none;">ğŸ  ë¶€ë™ì‚° êµ¬ë§¤</button>
            <div style="margin: 15px 0;">
                <span class="dice" id="dice1">1</span>
                <span class="dice" id="dice2">1</span>
            </div>
            <p id="currentTurn">ë‹¹ì‹ ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤!</p>
        </div>

        <div class="game-log" id="gameLog">
            <div class="log-entry">ê²Œì„ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤! í”Œë ˆì´ì–´ì™€ ì»´í“¨í„° ëª¨ë‘ $1000ìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.</div>
        </div>

        <div class="properties-panel">
            <h3>ğŸ  ë¶€ë™ì‚° í˜„í™©</h3>
            <div class="properties-grid" id="propertiesGrid"></div>
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ
        let gameState = {
            currentPlayer: 'player',
            playerMoney: 1000,
            computerMoney: 1000,
            playerPosition: 0,
            computerPosition: 0,
            playerProperties: [],
            computerProperties: [],
            playerInJail: false,
            computerInJail: false,
            playerJailFree: false,
            computerJailFree: false,
            playerDoubleCount: 0,
            computerDoubleCount: 0,
            gameEnded: false
        };

        // 5x5 ë³´ë“œ ë ˆì´ì•„ì›ƒ (16ì¹¸, í…Œë‘ë¦¬ë§Œ ì‚¬ìš©)
        const boardLayout = [
            { name: 'ì‹œì‘', type: 'corner', price: 0 },
            { name: 'ê°•ë‚¨', type: 'property', price: 100 },
            { name: 'í–‰ìš´ì¹´ë“œ', type: 'lucky', price: 0 },
            { name: 'í™ëŒ€', type: 'property', price: 120 },
            { name: 'ê°ì˜¥', type: 'jail', price: 0 },
            { name: 'ëª…ë™', type: 'property', price: 150 },
            { name: 'ë™ëŒ€ë¬¸', type: 'property', price: 100 },
            { name: 'ì´íƒœì›', type: 'property', price: 130 },
            { name: 'ë¬´ë£Œì£¼ì°¨', type: 'corner', price: 0 },
            { name: 'ì—¬ì˜ë„', type: 'property', price: 110 },
            { name: 'í–‰ìš´ì¹´ë“œ', type: 'lucky', price: 0 },
            { name: 'ê±´ëŒ€', type: 'property', price: 90 },
            { name: 'ì„¸ê¸ˆ', type: 'tax', price: 0 },
            { name: 'ì‹ ì´Œ', type: 'property', price: 80 },
            { name: 'ì ì‹¤', type: 'property', price: 140 },
            { name: 'ì••êµ¬ì •', type: 'property', price: 160 }
        ];

        // 5x5 ê·¸ë¦¬ë“œì—ì„œ ë³´ë“œ ìœ„ì¹˜ ë§¤í•‘
        const positionToGrid = [
            0, 1, 2, 3, 4,          // ìœ„ìª½ (0-4)
            9, 14, 19,              // ì˜¤ë¥¸ìª½ (5-7)
            24, 23, 22, 21, 20,     // ì•„ë˜ìª½ (8-12)
            15, 10, 5               // ì™¼ìª½ (13-15)
        ];

        // ë³´ë“œ ì´ˆê¸°í™”
        function initBoard() {
            const board = document.getElementById('gameBoard');
            
            // ê¸°ì¡´ ê²Œì„ ì…€ë“¤ë§Œ ì œê±° (ì¤‘ì•™ íŒ¨ë„ ì œì™¸)
            const existingCells = board.querySelectorAll('.cell');
            existingCells.forEach(cell => cell.remove());
            
            for (let i = 0; i < 25; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.id = `cell-${i}`;
                
                const boardIndex = positionToGrid.indexOf(i);
                if (boardIndex !== -1) {
                    const cellData = boardLayout[boardIndex];
                    
                    if (cellData.type === 'corner') {
                        cell.classList.add('corner');
                        cell.innerHTML = `<div>${cellData.name}</div>`;
                    } else if (cellData.type === 'jail') {
                        cell.classList.add('jail');
                        cell.innerHTML = `<div>ğŸ”’${cellData.name}</div>`;
                    } else if (cellData.type === 'property') {
                        cell.classList.add('property');
                        cell.innerHTML = `
                            <div class="property-name">${cellData.name}</div>
                            <div class="property-price">${cellData.price}</div>
                        `;
                    } else if (cellData.type === 'tax') {
                        cell.innerHTML = `<div style="font-size: 9px;">ğŸ’¸${cellData.name}<br>$50</div>`;
                    } else {
                        cell.innerHTML = `<div style="font-size: 9px;">ğŸ€${cellData.name}</div>`;
                    }
                } else {
                    cell.style.background = '#f8f9fa';
                    cell.style.border = 'none';
                }
                
                // ì¤‘ì•™ íŒ¨ë„ ì•ì— ì…€ ì¶”ê°€
                board.insertBefore(cell, board.querySelector('.center-control-panel'));
            }
            
            updateBoard();
            updatePropertiesPanel();
        }

        // ë¶€ë™ì‚° íŒ¨ë„ ì—…ë°ì´íŠ¸
        function updatePropertiesPanel() {
            const panel = document.getElementById('propertiesGrid');
            if (!panel) return;
            
            panel.innerHTML = '';
            
            boardLayout.forEach((cell, index) => {
                if (cell.type === 'property') {
                    const propertyItem = document.createElement('div');
                    propertyItem.className = 'property-item';
                    
                    let owner = 'ë¯¸ì†Œìœ ';
                    let sellButton = '';
                    
                    if (gameState.playerProperties.includes(index)) {
                        propertyItem.classList.add('player-owned');
                        owner = 'í”Œë ˆì´ì–´ ì†Œìœ ';
                        sellButton = `<button class="btn btn-sell" onclick="sellProperty(${index})">íŒë§¤ ($${Math.floor(cell.price * 0.7)})</button>`;
                    } else if (gameState.computerProperties.includes(index)) {
                        propertyItem.classList.add('computer-owned');
                        owner = 'ì»´í“¨í„° ì†Œìœ ';
                    }
                    
                    propertyItem.innerHTML = `
                        <div><strong>${cell.name}</strong></div>
                        <div>êµ¬ë§¤ê°€: $${cell.price}</div>
                        <div>ì„ëŒ€ë£Œ: $${Math.floor(cell.price * 0.15)}</div>
                        <div style="font-size: 12px; color: #666;">${owner}</div>
                        ${sellButton}
                    `;
                    
                    panel.appendChild(propertyItem);
                }
            });
        }

        // ë¶€ë™ì‚° íŒë§¤
        function sellProperty(propertyIndex) {
            if (!gameState.playerProperties.includes(propertyIndex)) return;
            
            const cellData = boardLayout[propertyIndex];
            const sellPrice = Math.floor(cellData.price * 0.7);
            
            if (confirm(`${cellData.name}ì„(ë¥¼) $${sellPrice}ì— íŒë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                gameState.playerMoney += sellPrice;
                gameState.playerProperties = gameState.playerProperties.filter(p => p !== propertyIndex);
                addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ${cellData.name}ì„(ë¥¼) $${sellPrice}ì— íŒë§¤í–ˆìŠµë‹ˆë‹¤.`);
                updateUI();
                updateBoard();
                updatePropertiesPanel();
            }
        }

        // ë³´ë“œ ì—…ë°ì´íŠ¸
        function updateBoard() {
            document.querySelectorAll('.player').forEach(p => p.remove());
            
            const playerGridPos = positionToGrid[gameState.playerPosition];
            const computerGridPos = positionToGrid[gameState.computerPosition];
            
            if (playerGridPos !== undefined) {
                const playerCell = document.getElementById(`cell-${playerGridPos}`);
                if (playerCell) {
                    const playerMarker = document.createElement('div');
                    playerMarker.className = 'player player-human';
                    playerMarker.textContent = gameState.playerInJail ? 'ğŸ”’' : 'P';
                    playerCell.appendChild(playerMarker);
                }
            }
            
            if (computerGridPos !== undefined) {
                const computerCell = document.getElementById(`cell-${computerGridPos}`);
                if (computerCell) {
                    const computerMarker = document.createElement('div');
                    computerMarker.className = 'player player-computer';
                    computerMarker.textContent = gameState.computerInJail ? 'ğŸ”’' : 'C';
                    computerCell.appendChild(computerMarker);
                }
            }
            
            document.querySelectorAll('.cell').forEach(cell => {
                cell.classList.remove('owned-player', 'owned-computer');
            });
            
            gameState.playerProperties.forEach(propIndex => {
                const cellIndex = positionToGrid[propIndex];
                if (cellIndex !== undefined) {
                    const cell = document.getElementById(`cell-${cellIndex}`);
                    if (cell) cell.classList.add('owned-player');
                }
            });
            
            gameState.computerProperties.forEach(propIndex => {
                const cellIndex = positionToGrid[propIndex];
                if (cellIndex !== undefined) {
                    const cell = document.getElementById(`cell-${cellIndex}`);
                    if (cell) cell.classList.add('owned-computer');
                }
            });
            
            updateBuyButton();
        }

        // êµ¬ë§¤ ë²„íŠ¼ ì—…ë°ì´íŠ¸
        function updateBuyButton() {
            const buyButton = document.getElementById('buyButton');
            const centerBuyButton = document.getElementById('centerBuyButton');
            
            const currentCell = boardLayout[gameState.playerPosition];
            if (!currentCell) return;
            
            const canBuy = gameState.currentPlayer === 'player' && 
                currentCell.type === 'property' && 
                !gameState.playerProperties.includes(gameState.playerPosition) && 
                !gameState.computerProperties.includes(gameState.playerPosition) &&
                gameState.playerMoney >= currentCell.price &&
                !gameState.playerInJail;
            
            if (buyButton) {
                if (canBuy) {
                    buyButton.style.display = 'inline-block';
                    buyButton.textContent = `ğŸ  ${currentCell.name} êµ¬ë§¤ (${currentCell.price})`;
                } else {
                    buyButton.style.display = 'none';
                }
            }
            
            if (centerBuyButton) {
                if (canBuy) {
                    centerBuyButton.style.display = 'inline-block';
                    centerBuyButton.textContent = `êµ¬ë§¤ ${currentCell.price}`;
                } else {
                    centerBuyButton.style.display = 'none';
                }
            }
        }

        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            const elements = {
                playerMoney: document.getElementById('playerMoney'),
                computerMoney: document.getElementById('computerMoney'),
                playerProperties: document.getElementById('playerProperties'),
                computerProperties: document.getElementById('computerProperties'),
                playerPosition: document.getElementById('playerPosition'),
                computerPosition: document.getElementById('computerPosition'),
                playerStatus: document.getElementById('playerStatus'),
                computerStatus: document.getElementById('computerStatus'),
                currentTurn: document.getElementById('currentTurn'),
                centerTurn: document.getElementById('centerTurn'),
                centerPlayerMoney: document.getElementById('centerPlayerMoney'),
                centerComputerMoney: document.getElementById('centerComputerMoney')
            };
            
            if (elements.playerMoney) elements.playerMoney.textContent = gameState.playerMoney;
            if (elements.computerMoney) elements.computerMoney.textContent = gameState.computerMoney;
            if (elements.playerProperties) elements.playerProperties.textContent = gameState.playerProperties.length;
            if (elements.computerProperties) elements.computerProperties.textContent = gameState.computerProperties.length;
            if (elements.playerPosition) elements.playerPosition.textContent = boardLayout[gameState.playerPosition]?.name || 'ì•Œ ìˆ˜ ì—†ìŒ';
            if (elements.computerPosition) elements.computerPosition.textContent = boardLayout[gameState.computerPosition]?.name || 'ì•Œ ìˆ˜ ì—†ìŒ';
            
            // ì¤‘ì•™ íŒ¨ë„ ì—…ë°ì´íŠ¸
            if (elements.centerPlayerMoney) elements.centerPlayerMoney.textContent = gameState.playerMoney;
            if (elements.centerComputerMoney) elements.centerComputerMoney.textContent = gameState.computerMoney;
            
            const turnText = gameState.currentPlayer === 'player' ? 'ë‹¹ì‹ ì˜ ì°¨ë¡€!' : 'ì»´í“¨í„° ì°¨ë¡€';
            if (elements.currentTurn) elements.currentTurn.textContent = gameState.currentPlayer === 'player' ? 'ë‹¹ì‹ ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤!' : 'ì»´í“¨í„°ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤...';
            if (elements.centerTurn) elements.centerTurn.textContent = turnText;
            
            let playerStatusText = '';
            if (gameState.playerInJail) playerStatusText += '<div class="status-indicator">ğŸ”’ ê°ì˜¥ì— ìˆìŒ</div>';
            if (gameState.playerJailFree) playerStatusText += '<div class="status-indicator">ğŸ—ï¸ ê°ì˜¥ ë©´ì œê¶Œ ë³´ìœ </div>';
            if (elements.playerStatus) elements.playerStatus.innerHTML = playerStatusText;
            
            let computerStatusText = '';
            if (gameState.computerInJail) computerStatusText += '<div class="status-indicator">ğŸ”’ ê°ì˜¥ì— ìˆìŒ</div>';
            if (gameState.computerJailFree) computerStatusText += '<div class="status-indicator">ğŸ—ï¸ ê°ì˜¥ ë©´ì œê¶Œ ë³´ìœ </div>';
            if (elements.computerStatus) elements.computerStatus.innerHTML = computerStatusText;
        }

        // ê²Œì„ ë¡œê·¸ ì¶”ê°€
        function addLog(message) {
            const log = document.getElementById('gameLog');
            if (!log) return;
            
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = message;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        // ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°
        function rollDice() {
            if (gameState.gameEnded) return;
            
            if (gameState.currentPlayer === 'player' && gameState.playerInJail) {
                gameState.playerInJail = false;
                addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ê°ì˜¥ì—ì„œ 1í„´ì„ ì‰¬ì—ˆìŠµë‹ˆë‹¤.`);
                gameState.currentPlayer = 'computer';
                setTimeout(() => {
                    if (!gameState.gameEnded) computerTurn();
                }, 1500);
                updateUI();
                updateBoard();
                return;
            }
            
            const dice1 = Math.floor(Math.random() * 4) + 1;
            const dice2 = Math.floor(Math.random() * 4) + 1;
            const total = dice1 + dice2;
            const isDouble = dice1 === dice2;
            
            document.getElementById('dice1').textContent = dice1;
            document.getElementById('dice2').textContent = dice2;
            document.getElementById('centerDice1').textContent = dice1;
            document.getElementById('centerDice2').textContent = dice2;
            document.getElementById('centerDice1').textContent = dice1;
            document.getElementById('centerDice2').textContent = dice2;
            
            if (gameState.currentPlayer === 'player') {
                if (isDouble) {
                    gameState.playerDoubleCount++;
                    addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ë”ë¸” ${dice1} + ${dice2} = ${total}ì„ êµ´ë ¸ìŠµë‹ˆë‹¤! (${gameState.playerDoubleCount}ë²ˆì§¸)`);
                    
                    if (gameState.playerDoubleCount >= 2) {
                        addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ì—°ì† ë”ë¸”ë¡œ ê°ì˜¥ì— ê°‘ë‹ˆë‹¤!`);
                        gameState.playerPosition = 4;
                        gameState.playerInJail = true;
                        gameState.playerDoubleCount = 0;
                        gameState.currentPlayer = 'computer';
                        setTimeout(() => {
                            if (!gameState.gameEnded) computerTurn();
                        }, 1500);
                        updateUI();
                        updateBoard();
                        return;
                    }
                } else {
                    gameState.playerDoubleCount = 0;
                    addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ${dice1} + ${dice2} = ${total}ì„ êµ´ë ¸ìŠµë‹ˆë‹¤.`);
                }
                
                const oldPosition = gameState.playerPosition;
                gameState.playerPosition = (gameState.playerPosition + total) % 16;
                addLog(`${boardLayout[gameState.playerPosition].name}ì— ë„ì°©!`);
                
                if (gameState.playerPosition < oldPosition) {
                    gameState.playerMoney += 100;
                    addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ì‹œì‘ì ì„ ì§€ë‚˜ê°€ì„œ $100ì„ ë°›ì•˜ìŠµë‹ˆë‹¤!`);
                }
                
                handleLanding('player', gameState.playerPosition);
                
                if (!isDouble) {
                    gameState.currentPlayer = 'computer';
                    setTimeout(() => {
                        if (!gameState.gameEnded) computerTurn();
                    }, 1500);
                }
            }
            
            updateUI();
            updateBoard();
            updatePropertiesPanel();
        }

        // ì»´í“¨í„° í„´
        function computerTurn() {
            if (gameState.computerInJail) {
                gameState.computerInJail = false;
                addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ ê°ì˜¥ì—ì„œ 1í„´ì„ ì‰¬ì—ˆìŠµë‹ˆë‹¤.`);
                gameState.currentPlayer = 'player';
                updateUI();
                updateBoard();
                return;
            }
            
            const dice1 = Math.floor(Math.random() * 4) + 1;
            const dice2 = Math.floor(Math.random() * 4) + 1;
            const total = dice1 + dice2;
            const isDouble = dice1 === dice2;
            
            document.getElementById('dice1').textContent = dice1;
            document.getElementById('dice2').textContent = dice2;
            
            if (isDouble) {
                gameState.computerDoubleCount++;
                addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ ë”ë¸” ${dice1} + ${dice2} = ${total}ì„ êµ´ë ¸ìŠµë‹ˆë‹¤! (${gameState.computerDoubleCount}ë²ˆì§¸)`);
                
                if (gameState.computerDoubleCount >= 2) {
                    addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ ì—°ì† ë”ë¸”ë¡œ ê°ì˜¥ì— ê°‘ë‹ˆë‹¤!`);
                    gameState.computerPosition = 4;
                    gameState.computerInJail = true;
                    gameState.computerDoubleCount = 0;
                    gameState.currentPlayer = 'player';
                    updateUI();
                    updateBoard();
                    return;
                }
            } else {
                gameState.computerDoubleCount = 0;
                addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ ${dice1} + ${dice2} = ${total}ì„ êµ´ë ¸ìŠµë‹ˆë‹¤.`);
            }
            
            const oldPosition = gameState.computerPosition;
            gameState.computerPosition = (gameState.computerPosition + total) % 16;
            addLog(`${boardLayout[gameState.computerPosition].name}ì— ë„ì°©!`);
            
            if (gameState.computerPosition < oldPosition) {
                gameState.computerMoney += 100;
                addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ ì‹œì‘ì ì„ ì§€ë‚˜ê°€ì„œ $100ì„ ë°›ì•˜ìŠµë‹ˆë‹¤!`);
            }
            
            handleLanding('computer', gameState.computerPosition);
            
            if (!isDouble) {
                gameState.currentPlayer = 'player';
            } else {
                setTimeout(() => {
                    if (!gameState.gameEnded) computerTurn();
                }, 1500);
            }
            
            updateUI();
            updateBoard();
            updatePropertiesPanel();
        }

        // í–‰ìš´ì¹´ë“œ ì²˜ë¦¬
        function handleLuckyCard(player) {
            const effects = [
                { text: 'ê°ì˜¥ìœ¼ë¡œ ê°‘ë‹ˆë‹¤!', action: 'jail' },
                { text: 'ê°ì˜¥ ë©´ì œê¶Œì„ ë°›ì•˜ìŠµë‹ˆë‹¤!', action: 'jailFree' },
                { text: 'ì„¸ê¸ˆì¹¸ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤!', action: 'tax' },
                { text: 'ìƒëŒ€ë°©ì˜ ë¶€ë™ì‚° í•˜ë‚˜ë¥¼ ê°•ì œ íŒë§¤ì‹œí‚µë‹ˆë‹¤!', action: 'sellOpponent' },
                { text: '$300ë¥¼ ë°›ìŠµë‹ˆë‹¤!', action: 'money' }
            ];
            
            const effect = effects[Math.floor(Math.random() * effects.length)];
            addLog(`ğŸ€ í–‰ìš´ì¹´ë“œ: ${effect.text}`);
            
            switch (effect.action) {
                case 'jail':
                    if (player === 'player') {
                        if (gameState.playerJailFree) {
                            gameState.playerJailFree = false;
                            addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ê°ì˜¥ ë©´ì œê¶Œì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤!`);
                        } else {
                            gameState.playerPosition = 4;
                            gameState.playerInJail = true;
                        }
                    } else {
                        if (gameState.computerJailFree) {
                            gameState.computerJailFree = false;
                            addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ ê°ì˜¥ ë©´ì œê¶Œì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤!`);
                        } else {
                            gameState.computerPosition = 4;
                            gameState.computerInJail = true;
                        }
                    }
                    break;
                case 'jailFree':
                    if (player === 'player') {
                        gameState.playerJailFree = true;
                    } else {
                        gameState.computerJailFree = true;
                    }
                    break;
                case 'tax':
                    const taxPosition = 12;
                    if (player === 'player') {
                        gameState.playerPosition = taxPosition;
                        gameState.playerMoney -= 50;
                        addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ì„¸ê¸ˆ $50ì„ ì§€ë¶ˆí–ˆìŠµë‹ˆë‹¤.`);
                    } else {
                        gameState.computerPosition = taxPosition;
                        gameState.computerMoney -= 50;
                        addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ ì„¸ê¸ˆ $50ì„ ì§€ë¶ˆí–ˆìŠµë‹ˆë‹¤.`);
                    }
                    break;
                case 'sellOpponent':
                    if (player === 'player' && gameState.computerProperties.length > 0) {
                        const randomIndex = Math.floor(Math.random() * gameState.computerProperties.length);
                        const propertyIndex = gameState.computerProperties[randomIndex];
                        const sellPrice = Math.floor(boardLayout[propertyIndex].price * 0.7);
                        gameState.computerMoney += sellPrice;
                        gameState.computerProperties.splice(randomIndex, 1);
                        addLog(`<span class="log-computer">ì»´í“¨í„°</span>ì˜ ${boardLayout[propertyIndex].name}ì´ ê°•ì œ íŒë§¤ë˜ì–´ ${sellPrice}ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.`);
                    } else if (player === 'computer' && gameState.playerProperties.length > 0) {
                        const randomIndex = Math.floor(Math.random() * gameState.playerProperties.length);
                        const propertyIndex = gameState.playerProperties[randomIndex];
                        const sellPrice = Math.floor(boardLayout[propertyIndex].price * 0.7);
                        gameState.playerMoney += sellPrice;
                        gameState.playerProperties.splice(randomIndex, 1);
                        addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ì˜ ${boardLayout[propertyIndex].name}ì´ ê°•ì œ íŒë§¤ë˜ì–´ ${sellPrice}ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.`);
                    }
                    break;
                case 'money':
                    if (player === 'player') {
                        gameState.playerMoney += 300;
                        addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ $300ì„ ë°›ì•˜ìŠµë‹ˆë‹¤!`);
                    } else {
                        gameState.computerMoney += 300;
                        addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ $300ì„ ë°›ì•˜ìŠµë‹ˆë‹¤!`);
                    }
                    break;
            }
        }

        // ì°©ì§€ ì²˜ë¦¬
        function handleLanding(player, position) {
            const cellData = boardLayout[position];
            
            if (cellData.type === 'property') {
                if (player === 'computer') {
                    if (gameState.computerMoney >= cellData.price && 
                        !gameState.playerProperties.includes(position) && 
                        !gameState.computerProperties.includes(position) &&
                        Math.random() > 0.4) {
                        gameState.computerMoney -= cellData.price;
                        gameState.computerProperties.push(position);
                        addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ ${cellData.name}ì„(ë¥¼) ${cellData.price}ì— êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤!`);
                    }
                }
                
                if (player === 'player' && gameState.computerProperties.includes(position)) {
                    const rent = Math.floor(cellData.price * 0.15);
                    gameState.playerMoney -= rent;
                    gameState.computerMoney += rent;
                    addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ${cellData.name}ì˜ ì„ëŒ€ë£Œ ${rent}ì„ ì§€ë¶ˆí–ˆìŠµë‹ˆë‹¤.`);
                } else if (player === 'computer' && gameState.playerProperties.includes(position)) {
                    const rent = Math.floor(cellData.price * 0.15);
                    gameState.computerMoney -= rent;
                    gameState.playerMoney += rent;
                    addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ ${cellData.name}ì˜ ì„ëŒ€ë£Œ ${rent}ì„ ì§€ë¶ˆí–ˆìŠµë‹ˆë‹¤.`);
                }
            } else if (cellData.type === 'tax') {
                if (player === 'player') {
                    gameState.playerMoney -= 50;
                    addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ì„¸ê¸ˆ $50ì„ ì§€ë¶ˆí–ˆìŠµë‹ˆë‹¤.`);
                } else {
                    gameState.computerMoney -= 50;
                    addLog(`<span class="log-computer">ì»´í“¨í„°</span>ê°€ ì„¸ê¸ˆ $50ì„ ì§€ë¶ˆí–ˆìŠµë‹ˆë‹¤.`);
                }
            } else if (cellData.type === 'lucky') {
                handleLuckyCard(player);
            }
            
            checkGameEnd();
        }

        // í˜„ì¬ ë¶€ë™ì‚° êµ¬ë§¤
        function buyCurrentProperty() {
            const currentCell = boardLayout[gameState.playerPosition];
            if (currentCell.type !== 'property') return;
            
            if (gameState.playerMoney >= currentCell.price) {
                gameState.playerMoney -= currentCell.price;
                gameState.playerProperties.push(gameState.playerPosition);
                addLog(`<span class="log-player">í”Œë ˆì´ì–´</span>ê°€ ${currentCell.name}ì„(ë¥¼) ${currentCell.price}ì— êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤!`);
                updateUI();
                updateBoard();
                updatePropertiesPanel();
            }
        }

        // ê²Œì„ ì¢…ë£Œ í™•ì¸
        function checkGameEnd() {
            if (gameState.playerMoney < 0) {
                addLog('ğŸ’¸ ê²Œì„ ì¢…ë£Œ! ëˆì´ ë¶€ì¡±í•˜ì—¬ íŒŒì‚°í–ˆìŠµë‹ˆë‹¤. ì»´í“¨í„° ìŠ¹ë¦¬!');
                gameState.gameEnded = true;
                document.getElementById('rollDice').disabled = true;
            } else if (gameState.computerMoney < 0) {
                addLog('ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ì»´í“¨í„°ê°€ íŒŒì‚°í–ˆìŠµë‹ˆë‹¤. í”Œë ˆì´ì–´ ìŠ¹ë¦¬!');
                gameState.gameEnded = true;
                document.getElementById('rollDice').disabled = true;
            } else if (gameState.playerProperties.length >= 6) {
                addLog('ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! 6ê°œ ì´ìƒì˜ ë¶€ë™ì‚°ì„ ì†Œìœ í•˜ì—¬ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤!');
                gameState.gameEnded = true;
                document.getElementById('rollDice').disabled = true;
            } else if (gameState.computerProperties.length >= 6) {
                addLog('ğŸ’¸ ê²Œì„ ì¢…ë£Œ! ì»´í“¨í„°ê°€ 6ê°œ ì´ìƒì˜ ë¶€ë™ì‚°ì„ ì†Œìœ í–ˆìŠµë‹ˆë‹¤. ì»´í“¨í„° ìŠ¹ë¦¬!');
                gameState.gameEnded = true;
                document.getElementById('rollDice').disabled = true;
            }
        }

        // í˜ì´ì§€ ë¡œë“œ í›„ ê²Œì„ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initBoard();
            updateUI();
        });
        
        // ì´ˆê¸°í™” í•¨ìˆ˜ ì§ì ‘ í˜¸ì¶œ (ë°±ì—…)
        initBoard();
        updateUI();
    </script>
</body>
</html>
